<style>
th, td, tr {
	padding-right: 15px;
}

.alert {
	border-radius: 5px;
	padding: 15px;
	background: #d8ecdb;
	color: #295529;
}
</style>

<div class="h2-title" style="padding-top: 20px;">
    <h3 class="text upper">Engagements</h3>
	<button class="btn" style="padding-left: 0rem;" > <%= link_to new_point_event_path(@pointEvents), class: "nor-button small" do %>
	<%= fa_icon "plus", size: '3x' %><span class="lbl">New</span><% end %>
	</button>
	<%# make two buttons to output 2 different kinds of CSV %>
	<button class="btn " style="padding-left: 0rem;"> <%= link_to point_event_csv_path(:format => :csv, format_data: "events"), format_data: "events", class: "nor-button small" do %>
	<%= fa_icon "download", size: '3x' %><span class="lbl">Download</span><% end %>
	</button>
	<button class="btn " style="padding-left: 0rem;"> <%= link_to point_event_csv_path(:format => :csv), format_data: "users", class: "nor-button small" do %>
	<%= fa_icon "download", size: '3x' %><span class="lbl">Download Attendance</span><% end %>
	</button>
</div>

<%# Admin's View %>
<% if admin? %>
	<table class="styled-table small" >
		<tr>
			<th>Event</th>
			<th>Description</th>
			<th>Points</th>
			<th>Capacity</th>
			<th colspan="4">Actions</th>
			<th>Attendance QRCode</th>
		</tr>

		<% @point_events.each do |point_event| %>
		<tr>
			<td><%= point_event.name %></td>
			<td><%= point_event.description %></td>
			<td><%= point_event.points %></td>
			<td><%= PointEvent.display_capacity(point_event) %>
			
			<td><%= link_to "Show", point_event_path(point_event) %></td>
			<td><%= link_to "Edit", edit_point_event_path(point_event) %></td>
			<td><%= link_to "Delete", delete_point_event_path(point_event) %></td>
			<td><%= link_to "Sign up", sign_up_point_event_path(point_event) %>
			<td><%= link_to "QR", qr_point_event_path(point_event) %></td>
		</tr>
		<% end %>
	</table>
	<br>
  <div align="center" >
      <div>
		<%# <h4> Import Data From CSV file </h4> %>
		<%= form_tag import_point_event_index_path, class: "small", multipart: true do %>
			<%= file_field_tag :file %>
			<%= button_tag :submit, class: "nor-button small" do %>
			<%= fa_icon "upload", size: '3x'%><span class="lbl">Import</span>
			<% end %>
		<% end %>

		<%= form_tag import_part_point_event_index_path, class: "small", multipart: true do %>
			<%= file_field_tag :file %>
			<%= button_tag :submit, class: "nor-button small" do %><%= fa_icon "upload", size: '3x'%>
			<span class="lbl">Import Attendance</span>
			<% end %>
		<% end %>
      </div>
  </div>

<%# Member's View %>
<% else %>
	<table class="styled-table small" >
		<tr>
			<th>Engagement</th>
			<th>Description</th>
			<th>Points</th>
			<th>Capacity</th>
			<th colspan="2">Actions</th>
		</tr>

		<% @point_events.each do |point_event| %>
		<tr>
			<td><%= point_event.name %></td>
			<td><%= point_event.description %></td>
			<td><%= point_event.points %></td>
			<td><%= PointEvent.display_capacity(point_event) %>

			<td><%= link_to "Show", point_event_path(point_event) %></td>
			<td><%= link_to "Sign up", sign_up_point_event_path(point_event) %>
		</tr>
		<% end %>
	</table>
<% end %>
