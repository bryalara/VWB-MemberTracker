<%= render "layouts/navbar2", user: @user %>
<style>
th, td, tr {
	padding-right: 15px;
}

.alert {
	border-radius: 5px;
	padding: 15px;
	background: #d8ecdb;
	color: #295529;
}
</style>

<div class="header">
	<h2 class="active h2-title">Engagements</h2>
</div>

<%# Admin's View %>
<% if admin? %>
	<div class="align-table" >
		<button class="btn btn-decor" style="padding-left: 0rem;" > <%= link_to "Add an Engagement", new_point_event_path(@point_events), class:"back-button" %></button>
		<table class="styled-table" >
			<tr>
				<th>Event</th>
				<th>Description</th>
				<th>Points</th>
				<th>Capacity</th>
				<th colspan="5">Actions</th>
			</tr>

			<% @point_events.each do |point_event| %>
			<tr>
				<td><%= point_event.name %></td>
				<td><%= point_event.description %></td>
				<td><%= point_event.points %></td>
				<td><%= PointEvent.display_capacity(point_event) %>
				
				<td><%= link_to "Show", point_event_path(point_event) %></td>
				<td><%= link_to "Edit", edit_point_event_path(point_event) %></td>
				<td><%= link_to "Delete", delete_point_event_path(point_event) %></td>
				<td><%= link_to "QR", qr_point_event_path(point_event) %></td>
				<td><%= link_to "Sign up", sign_up_point_event_path(point_event) %>
			</tr>
			<% end %>
		</table>
	</div>

<%# Member's View %>
<% else %>
	<div class="align-table" >
		<table class="styled-table" >
			<tr>
				<th>Engagement</th>
				<th>Description</th>
				<th>Points</th>
				<th>Capacity</th>
				<th colspan="2">Actions</th>
			</tr>

			<% @point_events.each do |point_event| %>
			<tr>
				<td><%= point_event.name %></td>
				<td><%= point_event.description %></td>
				<td><%= point_event.points %></td>
				<td><%= PointEvent.display_capacity(point_event) %>

				<td><%= link_to "Show", point_event_path(point_event) %></td>
				<td><%= link_to "Sign up", sign_up_point_event_path(point_event) %>
			</tr>
			<% end %>
		</table>
	</div>
<% end %>
